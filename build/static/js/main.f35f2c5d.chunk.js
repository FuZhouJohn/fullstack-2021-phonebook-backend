(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(17),r=n.n(c),o=n(3),a=n(4),i=n.n(a),u="http://localhost:3001/api/persons",s={getAll:function(){return i.a.get(u).then((function(e){return e.data}))},create:function(e){return i.a.post(u,e).then((function(e){return e.data}))},deleteById:function(e){return i.a.delete("".concat(u,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return i.a.put("".concat(u,"/").concat(e),t).then((function(e){return e.data}))}},d=n(2),l=n(0),j=function(e){var t=e.text,n=e.setText;return Object(l.jsxs)("p",{children:["filter shown with ",Object(l.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},f=n(8),b=function(e){var t=e.persons,n=e.setPersons,c=e.showNotification,r=Object(d.useState)(""),a=Object(o.a)(r,2),i=a[0],u=a[1],j=Object(d.useState)(""),b=Object(o.a)(j,2),h=b[0],O=b[1];return Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r=t.find((function(e){return e.name===i}));if(r&&window.confirm("".concat(r.name," is already added to phonebook, replace the old number with a new one?")))s.update(r.id,Object(f.a)(Object(f.a)({},r),{},{number:h})).then((function(e){c("success","Updated ".concat(e.name)),n(t.map((function(t){return t.id!==e.id?t:e}))),u(""),O("")})).catch((function(){c("error","Information of ".concat(r.name," has already been removed from server")),n(t.filter((function(e){return e.id!==r.id})))}));else{var o={name:i,number:h};s.create(o).then((function(e){c("success","Added ".concat(e.name)),n(t.concat(e)),u(""),O("")}))}},children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:i,onChange:function(e){u(e.target.value)}})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:h,onChange:function(e){O(e.target.value)}})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var t=e.persons,n=e.filterText,c=e.onDelete,r=t.filter((function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>=0}));return Object(l.jsx)("div",{children:r.map((function(e){return Object(l.jsxs)("p",{children:[e.name," ",e.number," ",Object(l.jsx)("button",{onClick:function(){return c(e)},children:"delete"})]},e.name)}))})},O=function(e){var t=e.data;return null===t?null:Object(l.jsx)("div",{className:t.type,children:t.message})},m=function(){var e=Object(d.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(d.useState)(null),a=Object(o.a)(r,2),i=a[0],u=a[1];Object(d.useEffect)((function(){s.getAll().then((function(e){c(e)}))}),[]);var f=Object(d.useState)(""),m=Object(o.a)(f,2),p=m[0],x=m[1],v=null;return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(O,{data:i}),Object(l.jsx)(j,{text:p,setText:x}),Object(l.jsx)("h3",{children:"add a new"}),Object(l.jsx)(b,{persons:n,setPersons:c,showNotification:function(e,t){v&&clearTimeout(v),u({message:t,type:e}),v=setTimeout((function(){u(null)}),5e3)}}),Object(l.jsx)("h3",{children:"Numbers"}),Object(l.jsx)(h,{filterText:p,persons:n,onDelete:function(e){window.confirm("Delete ".concat(e.name," ?"))&&s.deleteById(e.id).then((function(){c(n.filter((function(t){return t.id!==e.id})))}))}})]})};n(41);r.a.render(Object(l.jsx)(m,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.f35f2c5d.chunk.js.map