(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){'use strict';n.r(t);var c=n(17),r=n.n(c),o=n(3),a=n(4),u=n.n(a),i='/api/persons',s={getAll:function(){return u.a.get(i).then((function(e){return e.data}))},create:function(e){return u.a.post(i,e).then((function(e){return e.data})).catch((function(e){return Promise.reject(e.response.data.error)}))},deleteById:function(e){return u.a.delete(''.concat(i,'/').concat(e)).then((function(e){return e.data}))},update:function(e,t){return u.a.put(''.concat(i,'/').concat(e),t).then((function(e){return e.data})).catch((function(e){return Promise.reject(e.response.data.error)}))}},d=n(2),j=n(0),l=function(e){var t=e.text,n=e.setText;return Object(j.jsxs)('p',{children:['filter shown with ',Object(j.jsx)('input',{value:t,onChange:function(e){n(e.target.value)}})]})},f=n(8),b=function(e){var t=e.persons,n=e.setPersons,c=e.showNotification,r=Object(d.useState)(''),a=Object(o.a)(r,2),u=a[0],i=a[1],l=Object(d.useState)(''),b=Object(o.a)(l,2),h=b[0],O=b[1];return Object(j.jsxs)('form',{onSubmit:function(e){e.preventDefault();var r=t.find((function(e){return e.name===u}));if(r&&window.confirm(''.concat(r.name,' is already added to phonebook, replace the old number with a new one?')))s.update(r.id,Object(f.a)(Object(f.a)({},r),{},{number:h})).then((function(e){c('success','Updated '.concat(e.name)),n(t.map((function(t){return t.id!==e.id?t:e}))),i(''),O('')})).catch((function(e){c('error',e)}));else{var o={name:u,number:h};s.create(o).then((function(e){c('success','Added '.concat(e.name)),n(t.concat(e)),i(''),O('')})).catch((function(e){c('error',e)}))}},children:[Object(j.jsxs)('div',{children:['name: ',Object(j.jsx)('input',{value:u,onChange:function(e){i(e.target.value)}})]}),Object(j.jsxs)('div',{children:['number: ',Object(j.jsx)('input',{value:h,onChange:function(e){O(e.target.value)}})]}),Object(j.jsx)('div',{children:Object(j.jsx)('button',{type:'submit',children:'add'})})]})},h=function(e){var t=e.persons,n=e.filterText,c=e.onDelete,r=t.filter((function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>=0}));return Object(j.jsx)('div',{children:r.map((function(e){return Object(j.jsxs)('p',{children:[e.name,' ',e.number,' ',Object(j.jsx)('button',{onClick:function(){return c(e)},children:'delete'})]},e.name)}))})},O=function(e){var t=e.data;return null===t?null:Object(j.jsx)('div',{className:t.type,children:t.message})},p=function(){var e=Object(d.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(d.useState)(null),a=Object(o.a)(r,2),u=a[0],i=a[1];Object(d.useEffect)((function(){s.getAll().then((function(e){c(e)}))}),[]);var f=Object(d.useState)(''),p=Object(o.a)(f,2),m=p[0],x=p[1],v=null;return Object(j.jsxs)('div',{children:[Object(j.jsx)('h2',{children:'Phonebook'}),Object(j.jsx)(O,{data:u}),Object(j.jsx)(l,{text:m,setText:x}),Object(j.jsx)('h3',{children:'add a new'}),Object(j.jsx)(b,{persons:n,setPersons:c,showNotification:function(e,t){v&&clearTimeout(v),i({message:t,type:e}),v=setTimeout((function(){i(null)}),5e3)}}),Object(j.jsx)('h3',{children:'Numbers'}),Object(j.jsx)(h,{filterText:m,persons:n,onDelete:function(e){window.confirm('Delete '.concat(e.name,' ?'))&&s.deleteById(e.id).then((function(){c(n.filter((function(t){return t.id!==e.id})))}))}})]})};n(41);r.a.render(Object(j.jsx)(p,{}),document.getElementById('root'))}},[[42,1,2]]])
//# sourceMappingURL=main.059ee639.chunk.js.map